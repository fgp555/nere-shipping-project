<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Report</title>
  </head>
  <body>
    <h1>Create Report</h1>
    <form id="reportForm">
      <!-- t0_header -->
      <h2>Header</h2>
      <input type="text" name="header_name" placeholder="Header Name" value="FLAVIO A. PREZIOSA" required /><br />
      <input type="text" name="header_address" placeholder="Header Address" value="Habana 2874 - 1419 - Buenos Aires - Argentina" required /><br />
      <input type="text" name="header_mobile" placeholder="Mobile" value="M +54 911 6677 2741" required /><br />
      <input type="email" name="header_email" placeholder="Email" value="flaviopreziosa@gmail.com" required /><br />
      <input type="text" name="container_code" placeholder="Container Codes" value="FSCU57267991,FSCU57267992" required /><br />
      <input type="text" name="report_date" placeholder="Report Date" value="Buenos Aires, 30th September 2024" required /><br />
      <input type="text" name="cliente_senores" placeholder="Cliente Señores" value="Messrs" required /><br />
      <input type="text" name="cliente_empresa" placeholder="Cliente Empresa" value="SACO Shipping GmbH" required /><br />
      <input type="text" name="cliente_deposito" placeholder="Cliente Deposito" value="Wollkammereistr 1" required /><br />
      <input type="text" name="cliente_postal" placeholder="Cliente Postal" value="D-21107 Hamburg" required /><br />
      <input type="text" name="operador_area" placeholder="Operador Area" value="Export & Import operations" required /><br />
      <input type="text" name="operador_responsables1" placeholder="Operador Responsables 1" value="Arne Schulte / Lars Reil" required /><br />
      <input type="text" name="operador_responsables2" placeholder="Operador Responsables 2" value="Gisel Gimenez / Florencia Bavaro" required /><br />
      <input type="text" name="report_mv" placeholder="Report MV" value="m.v. XIN CHANG SHA COMPLETAR" required /><br />
      <input type="text" name="containers_reporte" placeholder="Containers Reporte" value="¨IMPORT CONTAINERS UNSTUFFING REPORT¨" required /><br />
      <input type="text" name="containers_leyenda" placeholder="Containers Leyenda" value="GROUPAGE CONTAINERS" required /><br />
      <input
        type="text"
        name="containers_descripcion"
        placeholder="Containers Descripcion"
        value="1 x 40-ft non-operating reefer container & 1 x 40-ft DV container stuffed with consolidated cargo"
        required
      /><br />
      <input type="text" name="containers_destino" placeholder="Containers Destino" value="Buenos Aires - Argentina" required /><br />
      <textarea name="report_description" placeholder="Report Description" required>In compliance with the instructions given by Messrs. ¨SACO Shipping GmbH¨ - Hamburg...</textarea
      ><br />
      <textarea name="report_note" placeholder="Report Note" required>Given the great amount of pictures taken during this survey...</textarea><br />

      <!-- t1_details_shipment -->
      <h2>Shipment Details</h2>
      <input type="text" name="vessel" placeholder="Vessel" value="XIN CHANG SHA" required /><br />
      <input type="text" name="voyage" placeholder="Voyage" value="402S" required /><br />
      <input type="text" name="mbl_code" placeholder="MBL Code" value="ONEYHAME90065700" required /><br />
      <input type="text" name="pol" placeholder="POL" value="Hamburg, Germany" required /><br />
      <input type="text" name="shipper" placeholder="Shipper" value="SACO Shipping GmbH" required /><br />
      <input type="text" name="pod" placeholder="POD" value="Buenos Aires, Argentina" required /><br />
      <input type="text" name="consignee" placeholder="Consignee" value="SACO Shipping S.A." required /><br />
      <input type="number" name="qty_of_pkgs" placeholder="Qty of Pkgs" value="94" required /><br />
      <input type="text" name="goods" placeholder="Goods" value="Consolidated cargo" required /><br />
      <input type="text" name="gross_weight" placeholder="Gross Weight" value="38,068.90 kg" required /><br />

      <!-- T2_relevant_times -->
      <h2>Relevant Times</h2>
      <input type="date" name="date_rt" value="2024-09-25" required /><br />
      <input type="text" name="container_code_rt" placeholder="Container Code" value="FSCU57267991" required /><br />
      <input type="number" name="qty_of_pkgs_rt" placeholder="Qty of Pkgs" value="59" required /><br />
      <input type="time" name="start" placeholder="Start Time" value="08:00" required /><br />
      <input type="time" name="complete" placeholder="Complete Time" value="12:00" required /><br />
      <input type="text" name="time_used_to_survey" placeholder="Time Used" value="4 hours" required /><br />

      <!-- t3_securing_seals -->
      <h2>Securing Seals</h2>
      <input type="text" name="container_code_ss" placeholder="Container Code" value="FSCU57267991" required /><br />
      <input type="text" name="type" placeholder="Type" value="RF" required /><br />
      <input type="text" name="wwas_safety_seals" placeholder="WWAS Safety Seals" value="01-0265193" required /><br />
      <input type="text" name="argentinean_customs_seal" placeholder="Argentinean Customs Seal" value="None" required /><br />
      <input type="text" name="others" placeholder="Others" value="None" required /><br />

      <!-- t4_unstuffing_container -->
      <h2>Unstuffing Container</h2>
      <textarea name="notes" placeholder="Notes" required>As soon as the doors of the containers were unsealed...</textarea><br />
      <input type="text" name="image_path" placeholder="Image Path" value="https://www.example.com/img01.jpeg" required /><br />
      <input type="text" name="image_description" placeholder="Image Description" value="Image 1" required /><br />
      <input type="text" name="foot_note" placeholder="Foot Note" value="Roof panel scratched..." required /><br />

      <!-- t5_pre_existing_damage -->
      <h2>Pre-Existing Damage</h2>
      <textarea name="damage_notes" placeholder="Damage Notes" required>During the stripping operation, the following exceptions were noticed...</textarea><br />
      <input type="text" name="damage_title" placeholder="Damage Title" value=". FSCU57267991 x 40-ft non-operating reefer container" required /><br />
      <input type="text" name="b_l_no" placeholder="B/L No" value="BUE238550" required /><br />
      <input type="text" name="consignee_d" placeholder="Consignee" value="BIO ABA SA" required /><br />
      <input type="text" name="marks" placeholder="Marks" value="29119880" required /><br />
      <input type="number" name="qty_of_pkgs_d" placeholder="Qty of Pkgs" value="2" required /><br />
      <input type="text" name="goods_d" placeholder="Goods" value="Peptones" required /><br />
      <input type="text" name="remarks" placeholder="Remarks" value="1 pallet shrink-wrap film stretch torn off..." required /><br />
      <input type="text" name="damage_image_path" placeholder="Damage Image Path" value="https://www.example.com/img01.jpeg" required /><br />
      <input type="text" name="damage_image_description" placeholder="Damage Image Description" value="Image 1" required /><br />

      <!-- t6_the_weather -->
      <h2>The Weather</h2>
      <textarea name="weather_notes" placeholder="Weather Notes" required>Hot/cloudy</textarea><br />
      <input type="number" name="temperature" placeholder="Temperature" value="21" required /><br />
      <input type="number" name="humidity" placeholder="Humidity" value="70" required /><br />

      <!-- t7_footer -->
      <h2>Footer</h2>
      <textarea name="footer_notes" placeholder="Footer Notes" required>SIGNED WITHOUT PREJUDICE, Flavio Preziosa, Independent Cargo Surveyor</textarea><br />

      <!-- Submit Button -->
      <button type="submit">Create Report</button>
    </form>

    <script>
      document.getElementById("reportForm").addEventListener("submit", async (event) => {
        event.preventDefault();

        const formData = {
          t0_header: {
            header_name: event.target.header_name.value,
            header_address: event.target.header_address.value,
            header_mobile: event.target.header_mobile.value,
            header_email: event.target.header_email.value,
            container_code: event.target.container_code.value.split(","),
            report_date: event.target.report_date.value,
            cliente_senores: event.target.cliente_senores.value,
            cliente_empresa: event.target.cliente_empresa.value,
            cliente_deposito: event.target.cliente_deposito.value,
            cliente_postal: event.target.cliente_postal.value,
            operador_area: event.target.operador_area.value,
            operador_responsables1: event.target.operador_responsables1.value,
            operador_responsables2: event.target.operador_responsables2.value,
            report_mv: event.target.report_mv.value,
            containers_reporte: event.target.containers_reporte.value,
            containers_leyenda: event.target.containers_leyenda.value,
            containers_descripcion: event.target.containers_descripcion.value,
            containers_destino: event.target.containers_destino.value,
            report_description: event.target.report_description.value,
            report_note: event.target.report_note.value,
          },
          t1_details_shipment: {
            vessel: event.target.vessel.value,
            voyage: event.target.voyage.value,
            mbl_code: event.target.mbl_code.value,
            pol: event.target.pol.value,
            shipper: event.target.shipper.value,
            pod: event.target.pod.value,
            consignee: event.target.consignee.value,
            qty_of_pkgs: parseInt(event.target.qty_of_pkgs.value),
            goods: event.target.goods.value,
            gross_weight: event.target.gross_weight.value,
          },
          T2_relevant_times: [
            {
              date: event.target.date_rt.value,
              container_code: event.target.container_code_rt.value,
              qty_of_pkgs: parseInt(event.target.qty_of_pkgs_rt.value),
              start: event.target.start.value,
              complete: event.target.complete.value,
              time_used_to_survey: event.target.time_used_to_survey.value,
            },
          ],
          t3_securing_seals: [
            {
              container_code: event.target.container_code_ss.value,
              type: event.target.type.value,
              wwas_safety_seals: event.target.wwas_safety_seals.value,
              argentinean_customs_seal: event.target.argentinean_customs_seal.value,
              others: event.target.others.value,
            },
          ],
          t4_unstuffing_container: {
            notes: [event.target.notes.value],
            images: [
              {
                path: event.target.image_path.value,
                description: event.target.image_description.value,
              },
            ],
            foot_note: event.target.foot_note.value,
          },
          t5_pre_existing_damage: {
            notes: [event.target.damage_notes.value],
            damages: [
              {
                title: event.target.damage_title.value,
                b_l_no: event.target.b_l_no.value,
                consignee: event.target.consignee_d.value,
                marks: event.target.marks.value,
                qty_of_pkgs: parseInt(event.target.qty_of_pkgs_d.value),
                goods: event.target.goods_d.value,
                remarks: event.target.remarks.value,
                images: [
                  {
                    path: event.target.damage_image_path.value,
                    description: event.target.damage_image_description.value,
                  },
                ],
              },
            ],
          },
          t6_the_weather: {
            notes: [event.target.weather_notes.value],
            temperature: parseInt(event.target.temperature.value),
            humidity: parseInt(event.target.humidity.value),
          },
          t7_footer: {
            notes: event.target.footer_notes.value.split(","),
          },
        };

        try {
          const response = await fetch("/api/report/plain", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(formData),
          });
          const data = await response.json();
          alert("Report created successfully: " + JSON.stringify(data));
        } catch (error) {
          alert("Error creating report: " + error);
        }
      });
    </script>
  </body>
</html>
